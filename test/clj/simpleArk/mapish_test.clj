(ns simpleArk.mapish-test
  (:require [clojure.test :refer :all]
            [simpleArk.mapish :as mapish]))

(set! *warn-on-reflection* true)

(def sm0 (sorted-map :a 1 :b 2 :e 10 :f 11))
(def mi0 (mapish/->MI-map sm0 nil nil nil nil nil))
(def mi1 (mapish/->MI-map sm0 nil >= :b <= :e))
(def mi2 (mapish/->MI-map sm0 nil > :a < :f))

(deftest mapish
  (println sm0)
  (println mi0)
  (println (mapish/mi-seq mi0))
  (println (mapish/mi-seq mi1))
  (println (mapish/mi-seq mi2))
  (println (mapish/mi-seq (mapish/mi-assoc mi0 :c 3)))
  (println (mapish/mi-seq (mapish/mi-assoc mi1 :c 3)))
  (println (mapish/mi-seq (mapish/mi-assoc mi0 :a 1)))
  (println (mapish/mi-seq (mapish/mi-assoc mi0 :a 11)))
  (println (mapish/mi-rseq mi0))
  (println (mapish/mi-rseq mi1))
  (println (mapish/mi-rseq mi2))
  (println (mapish/mi-get mi0 :a))
  (println (mapish/mi-get mi1 :a))
  (println (mapish/mi-get mi2 :a))
  (println (mapish/mi-get mi0 :b))
  (println (mapish/mi-get mi1 :b))
  (println (mapish/mi-get mi2 :b))
  (println (mapish/mi-get mi0 :c))
  (println (mapish/mi-get mi0 :e))
  (println (mapish/mi-get mi1 :e))
  (println (mapish/mi-get mi2 :e))
  (println (mapish/mi-get mi0 :f))
  (println (mapish/mi-get mi1 :f))
  (println (mapish/mi-get mi2 :f))
  (println (mapish/mi-get mi0 :a 22))
  (println (mapish/mi-get mi0 :c 22))
  (println (mapish/mi-seq (mapish/mi-sub mi0 nil nil nil nil nil)))
  (println (mapish/mi-seq (mapish/mi-sub mi1 nil nil nil nil nil)))
  (println (mapish/mi-seq (mapish/mi-sub mi0 nil >= :a <= :f)))
  (println (mapish/mi-seq (mapish/mi-sub mi0 nil > :a < :f)))
  (println (mapish/mi-seq (mapish/mi-sub mi0 nil >= :b <= :e)))
  (println (mapish/mi-seq (mapish/mi-sub mi0 nil > :b < :e)))
  (println (mapish/mi-seq (mapish/mi-sub mi1 nil >= :a <= :f)))
  (println (mapish/mi-seq (mapish/mi-sub mi1 nil > :a < :f)))
  (println (mapish/mi-seq (mapish/mi-sub mi1 nil >= :b <= :e)))
  (println (mapish/mi-seq (mapish/mi-sub mi1 nil > :b < :e)))
  (println (mapish/mi-seq (mapish/mi-sub mi2 nil >= :a <= :f)))
  (println (mapish/mi-seq (mapish/mi-sub mi2 nil > :a < :f)))
  (println (mapish/mi-seq (mapish/mi-sub mi2 nil >= :b <= :e)))
  (println (mapish/mi-seq (mapish/mi-sub mi2 nil > :b < :e)))
  )
